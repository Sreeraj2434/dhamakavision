<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seat Selection - Sree Cinemas</title>
  <style>
    body {
      font-family: 'Ubuntu', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #111;
      color: #eee;
    }

    header {
      background-color: #1a1a1a;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .back-btn {
      color: #fff;
  background: #333;
  border: 2px solid #f39c12;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
    }

    .back-btn:hover {
      color: #f39c12;
    }

    h1 {
      text-align: center;
      margin: 20px 0;
      color: #d4af37;
      font-size: 28px;
    }

    .screen {
      margin: 20px auto;
      width: 80%;
      height: 40px;
      background: linear-gradient(to right, #f00, #d4af37);
      text-align: center;
      line-height: 40px;
      font-weight: bold;
      border-radius: 10px;
      box-shadow: 0 0 15px #f00;
    }

    .seating-area {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      margin: 30px auto;
      width: 90%;
    }

    .section {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin: 10px;
    }

    .vip-section {
      grid-template-columns: repeat(5, 1fr);
      margin-top: 40px;
    }

    .seat {
      width: 40px;
      height: 40px;
      background-color: #444;
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
      line-height: 40px;
      font-size: 14px;
      color: #fff;
      transition: background 0.3s;
    }

    .seat.available:hover {
      background-color: #6c5ce7;
    }

    .seat.selected {
      background-color: #00cec9;
    }

    .seat.sold {
      background-color: #636e72;
      cursor: not-allowed;
    }

    .seat.vip {
      background-color: #e67e22;
    }

    .seat.vip.selected {
      background-color: #f39c12;
    }

    .legend {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-box {
      width: 20px;
      height: 20px;
      border-radius: 3px;
    }

    .available-box { background-color: #444; }
    .sold-box { background-color: #636e72; }
    .selected-box { background-color: #00cec9; }
    .vip-box { background-color: #e67e22; }

    .price-section {
      text-align: center;
      margin-top: 20px;
      font-size: 16px;
    }

    .confirm-btn {
      display: block;
      margin: 30px auto;
      padding: 12px 30px;
      background-color: #d63031;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .confirm-btn:hover {
      background-color: #e17055;
    }

    @media (max-width: 768px) {
      .section {
        grid-template-columns: repeat(5, 1fr);
      }
      .vip-section {
        grid-template-columns: repeat(3, 1fr);
      }
      .seat {
        width: 35px;
        height: 35px;
        line-height: 35px;
      }
    }
  </style>
</head>
<body>

  <header>
    <button class="back-btn" onclick="history.back()">â¬… Back to Movies</button>
  </header>

  <h1>Seat Selection - Sree Cinemas</h1>

  <div class="screen">SCREEN</div>

  <div class="price-section">
    <p><strong>Normal:</strong> â‚¹200 | <strong>Executive (VIP):</strong> â‚¹300</p>
    <p id="totalPrice">Total: â‚¹0</p>
  </div>

  <div class="seating-area">
  <div style="display: flex; justify-content: space-around; flex-wrap: wrap; width: 100%;">
    <div class="section" id="left-section"></div>
    <div class="section" id="right-section"></div>
  </div>
  <div class="section vip-section" id="vip-section"></div>
</div>

  <div class="legend">
    <div class="legend-item"><div class="legend-box available-box"></div>Available</div>
    <div class="legend-item"><div class="legend-box sold-box"></div>Sold</div>
    <div class="legend-item"><div class="legend-box selected-box"></div>Selected</div>
    <div class="legend-item"><div class="legend-box vip-box"></div>VIP</div>
  </div>

  <button class="confirm-btn" onclick="confirmBooking()">Confirm Booking</button>

  <script>
    const leftSection = document.getElementById('left-section');
    const rightSection = document.getElementById('right-section');
    const vipSection = document.getElementById('vip-section');
    const priceDisplay = document.getElementById('totalPrice');

    const selectedSeats = [];

    function createSeat(label, isVip = false) {
      const seat = document.createElement('div');
      seat.classList.add('seat', 'available');
      if (isVip) seat.classList.add('vip');
      seat.innerText = label;

      seat.addEventListener('click', () => {
        if (seat.classList.contains('sold')) return;

        if (seat.classList.contains('selected')) {
          seat.classList.remove('selected');
          const index = selectedSeats.indexOf(seat);
          if (index > -1) selectedSeats.splice(index, 1);
        } else {
          seat.classList.add('selected');
          selectedSeats.push(seat);
        }

        updatePrice();
      });

      return seat;
    }

    function updatePrice() {
      let total = 0;
      selectedSeats.forEach(seat => {
        total += seat.classList.contains('vip') ? 300 : 200;
      });
      priceDisplay.innerText = `Total: â‚¹${total}`;
    }

    function confirmBooking() {
      if (selectedSeats.length === 0) {
        alert("Please select at least one seat.");
        return;
      }

      let message = "You have booked:\n";
      selectedSeats.forEach(seat => {
        message += `Seat: ${seat.innerText} - â‚¹${seat.classList.contains('vip') ? 300 : 200}\n`;
        seat.classList.remove('available', 'selected');
        seat.classList.add('sold');
      });
      selectedSeats.length = 0;
      updatePrice();
      alert(message + "Enjoy your movie!");
    }

    function init() {
      for (let i = 0; i < 40; i++) {
        const row = String.fromCharCode(65 + Math.floor(i / 8));
        const num = (i % 8) + 1;
        leftSection.appendChild(createSeat(`${row}${num}`));
        rightSection.appendChild(createSeat(`${row}${num + 8}`));
      }

      for (let i = 0; i < 10; i++) {
        vipSection.appendChild(createSeat(`V${i + 1}`, true));
      }
    }

    init();

    function confirmBooking() {
    if (selectedSeats.length === 0) {
      alert("Please select at least one seat.");
      return;
    }

    let seatListText = "";
    selectedSeats.forEach(seat => {
      seatListText += `${seat.innerText} - â‚¹${seat.classList.contains('vip') ? 300 : 200}\n`;
      seat.classList.remove('available', 'selected');
      seat.classList.add('sold');
    });

    // Display seat numbers and date in modal
    const seatLabels = selectedSeats.map(seat => seat.innerText).join(", ");
    document.getElementById("ticketSeats").innerText = "Seats: " + seatLabels;

    const date = new Date();
    const formattedDate = date.toLocaleDateString('en-IN', {
      year: 'numeric', month: 'long', day: 'numeric'
    });
    document.getElementById("ticketDate").innerText = "ðŸ“… Booking Date: " + formattedDate;

    // Clear selection and update price
    selectedSeats.length = 0;
    updatePrice();

    // Show confirmation modal
    document.getElementById("ticketModal").style.display = "flex";
  }

  function closeModal() {
    document.getElementById("ticketModal").style.display = "none";
  }
  

// After DOM is loaded
const selectedDate = localStorage.getItem('selectedDate');
if (selectedDate) {
  document.getElementById("selected-date-display").innerText = "ðŸ“… Booking Date: " + selectedDate;
}
  
  function goHome() {
  window.location.href = "index.html";
}
  </script>

<!-- Ticket Confirmation Modal -->
<div id="ticketModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
  background-color:rgba(0,0,0,0.8); z-index:9999; justify-content:center; align-items:center;">
  <div style="background:#1a1a1a; padding:30px; border-radius:12px; max-width:400px; text-align:center; color:#fff; border:2px solid #f39c12;">
    <h2 style="color:#00cec9;">ðŸŽ‰ Ticket Confirmed!</h2>
    <p id="ticketDate"></p>
    <p id="ticketSeats"></p>
    <img src="https://api.qrserver.com/v1/create-qr-code/?data=Booked&size=150x150" alt="QR Code" style="margin:20px 0;"/>
    <p style="color:#f1c40f;"><strong>Please take a screenshot of this ticket.</strong></p>
    <button onclick="goHome()" style="margin-top:10px; padding:10px 20px; background:#e74c3c; border:none; border-radius:6px; cursor:pointer;">Home</button>

  </div>
</div>


<p id="selected-date-display"></p>

</body>
</html>
